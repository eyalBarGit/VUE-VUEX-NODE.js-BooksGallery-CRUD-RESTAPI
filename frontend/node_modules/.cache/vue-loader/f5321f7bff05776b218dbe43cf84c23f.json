{"remainingRequest":"F:\\Dev\\Coding Academy ex\\Day107-VueWorkshop\\miss-book\\frontend\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!F:\\Dev\\Coding Academy ex\\Day107-VueWorkshop\\miss-book\\frontend\\src\\views\\bookDetails.vue?vue&type=script&lang=js&","dependencies":[{"path":"F:\\Dev\\Coding Academy ex\\Day107-VueWorkshop\\miss-book\\frontend\\src\\views\\bookDetails.vue","mtime":1593168485329},{"path":"F:\\Dev\\Coding Academy ex\\Day107-VueWorkshop\\miss-book\\frontend\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"F:\\Dev\\Coding Academy ex\\Day107-VueWorkshop\\miss-book\\frontend\\node_modules\\vuetify-loader\\lib\\loader.js","mtime":1574476662000},{"path":"F:\\Dev\\Coding Academy ex\\Day107-VueWorkshop\\miss-book\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"F:\\Dev\\Coding Academy ex\\Day107-VueWorkshop\\miss-book\\frontend\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgbG9uZ1RleHQgZnJvbSAiLi4vY29tcG9uZW50cy9sb25nVGV4dCI7DQppbXBvcnQgYWRkUmV2aWV3IGZyb20gIi4uL2NvbXBvbmVudHMvYWRkUmV2aWV3IjsNCmltcG9ydCBib29rU2VydmljZSBmcm9tICIuLi9zZXJ2aWNlcy9ib29rU2VydmljZS5qcyI7DQpleHBvcnQgZGVmYXVsdCB7DQogIG5hbWU6ICJib29rRGV0YWlscyIsDQogIGRhdGEoKSB7DQogICAgcmV0dXJuIHsNCiAgICAgIGJvb2s6IG51bGwsDQogICAgICBzaG93UmV2aWV3OiBmYWxzZSwNCiAgICAgIHJldmlld3M6IFtdLA0KICAgICAgbmV4dEJvb2s6IGZhbHNlDQogICAgfTsNCiAgfSwNCiAgY29tcG9uZW50czogew0KICAgIGxvbmdUZXh0LA0KICAgIGFkZFJldmlldw0KICB9LA0KICBtZXRob2RzOiB7DQogICAgYWRkUmV2aWV3KHJldmlldykgew0KICAgICAgdGhpcy5zZXROb3RpZmljYXRpb25BY3RpdmUoKTsNCiAgICAgIGNvbnN0IGJvb2tJZCA9IHRoaXMuJHJvdXRlLnBhcmFtcy5pZDsNCiAgICAgIGJvb2tTZXJ2aWNlLmFkZFJldmlldyhib29rSWQsIHJldmlldyk7DQogICAgICB0aGlzLnNob3dSZXZpZXcgPSBmYWxzZTsNCiAgICAgIHRoaXMucmV2aWV3cy5wdXNoKHJldmlldyk7DQogICAgICBjb25zb2xlLmxvZygiYWRkZWQgcmV2aWV3OiAiLCB0aGlzLnJldmlld3MpOw0KICAgIH0sDQogICAgcmVtb3ZlUmV2aWV3KHJldmlldykgew0KICAgICAgdGhpcy5zZXROb3RpZmljYXRpb25BY3RpdmUoKTsNCiAgICAgIGNvbnN0IGJvb2tJZCA9IHRoaXMuJHJvdXRlLnBhcmFtcy5pZDsNCiAgICAgIGJvb2tTZXJ2aWNlLnJlbW92ZVJldmlldyhib29rSWQsIHJldmlldyk7DQogICAgICB0aGlzLmdldEN1cnJSZXZpZXdzKCk7DQoNCiAgICAgIC8vIHRoaXMucmV2aWV3cy5wb3AoKTsNCg0KICAgICAgY29uc29sZS5sb2coInRoaXMucmV2aWV3czogIiwgdGhpcy5yZXZpZXdzKTsNCiAgICB9LA0KICAgIHNldE5vdGlmaWNhdGlvbkFjdGl2ZSgpIHsNCiAgICAgIHRoaXMuJHN0b3JlLmRpc3BhdGNoKCJ1cGRhdGVTbmFja0JhclN0YXR1cyIsIHRydWUpOw0KICAgIH0sDQogICAgZ2V0Q3VyclJldmlld3MoKSB7DQogICAgICB0aGlzLmJvb2sucmV2aWV3cyA/ICh0aGlzLnJldmlld3MgPSB0aGlzLmJvb2sucmV2aWV3cykgOiBbXTsNCiAgICB9LA0KICAgIGNoZWNrTmFuKCkgew0KICAgICAgcmV0dXJuIGlzTmFOKHRoaXMuYm9vay5wdWJsaXNoZWREYXRlKSA/IGZhbHNlIDogdHJ1ZTsNCiAgICB9LA0KDQogDQogICAgZ29Ub05leHRCb29rKCkgew0KICAgICAgdGhpcy4kcm91dGVyLnB1c2goew0KICAgICAgICBuYW1lOiAiYm9va0RldGFpbHMiLA0KICAgICAgICBwYXJhbXM6IHsNCiAgICAgICAgICBpZDogdGhpcy4kc3RvcmUuZ2V0dGVycy5nZXROZXh0Qm9vaw0KICAgICAgICB9DQogICAgICB9KTsNCiAgICB9DQogIH0sDQogIHdhdGNoOiB7DQogICAgIiRyb3V0ZS5wYXJhbXMuaWQiKG5ld1ZhbCwgb2xkVmFsKSB7DQogICAgICBjb25zb2xlLmxvZygibmV3VmFsIiwgbmV3VmFsKTsNCiAgICAgIGNvbnNvbGUubG9nKCJvbGRWYWwiLCBvbGRWYWwpOw0KICAgICAgbGV0IGJvb2tJZCA9IHRoaXMuJHJvdXRlLnBhcmFtcy5pZDsNCiAgICAgIGJvb2tTZXJ2aWNlLmdldEJ5SWQoYm9va0lkKS50aGVuKGJvb2sgPT4gew0KICAgICAgICB0aGlzLmJvb2sgPSBib29rOw0KICAgICAgICB0aGlzLmdldEN1cnJSZXZpZXdzKCk7DQogICAgICB9KTsNCiAgICB9DQogIH0sDQogIGNvbXB1dGVkOiB7DQogICAgcmVhZFN0YXR1cygpIHsNCiAgICAgIGxldCBwYWdlQ291bnQgPSB0aGlzLmJvb2sucGFnZUNvdW50Ow0KICAgICAgaWYgKHBhZ2VDb3VudCA+IDUwMCkgew0KICAgICAgICByZXR1cm4gIkxvbmcgcmVhZGluZyI7DQogICAgICB9DQogICAgICBpZiAocGFnZUNvdW50ID4gMjAwKSB7DQogICAgICAgIHJldHVybiAiRGVjZW50IFJlYWRpbmciOw0KICAgICAgfQ0KICAgICAgaWYgKHBhZ2VDb3VudCA8IDEwMCkgew0KICAgICAgICByZXR1cm4gIkxpZ2h0IFJlYWRpbmciOw0KICAgICAgfQ0KICAgICAgcmV0dXJuICJNZWRpdW0gUmVhZGluZyI7DQogICAgfSwNCiAgICBib29rQWdlKCkgew0KICAgICAgbGV0IGJvb2tBZ2UgPSB0aGlzLmJvb2sucHVibGlzaGVkRGF0ZTsNCiAgICAgIGxldCBjdXJyWWVhciA9IG5ldyBEYXRlKCkuZ2V0RnVsbFllYXIoKTsNCiAgICAgIGxldCB5ZWFyc0RpZmZlcmVuY2UgPSBjdXJyWWVhciAtIGJvb2tBZ2U7DQogICAgICBpZiAoeWVhcnNEaWZmZXJlbmNlID4gMTApIHJldHVybiAiVmV0ZXJhbiI7DQogICAgICBpZiAoeWVhcnNEaWZmZXJlbmNlIDwgMSkgcmV0dXJuICJOZXciOw0KICAgICAgcmV0dXJuIHllYXJzRGlmZmVyZW5jZSArICIgeWVhcnMgYWdvIjsNCiAgICB9DQogIH0sDQogIG1vdW50ZWQoKSB7fSwNCiAgYXN5bmMgY3JlYXRlZCgpIHsNCiAgICBsZXQgYm9va0lkID0gdGhpcy4kcm91dGUucGFyYW1zLmlkOw0KICAgIGNvbnN0IGN1cnJCb29rID0gYXdhaXQgYm9va1NlcnZpY2UuZ2V0QnlJZChib29rSWQpOw0KICAgIHRoaXMuYm9vayA9IGN1cnJCb29rOw0KICAgIHRoaXMuZ2V0Q3VyclJldmlld3MoKTsNCiAgICB0aGlzLiRzdG9yZS5kaXNwYXRjaCgidXBkYXRlQ3VyckJvb2siLCB0aGlzLmJvb2spOw0KICAgIGNvbnNvbGUubG9nKHRoaXMuJHN0b3JlLmdldHRlcnMuZ2V0Q3VyckJvb2spDQogIH0NCn07DQo="},{"version":3,"sources":["bookDetails.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAwFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"bookDetails.vue","sourceRoot":"src/views","sourcesContent":["<template>\r\n  <p v-if=\"!book\">loading...</p>\r\n  <div v-else class=\"bookDetails d-flex flex-column align-center justify-space-around\">\r\n    <v-card class=\"mx-auto my-12\" max-width=\"800\" width=\"100%\">\r\n      <v-img height=\"300\" :src=\"book.thumbnail\">\r\n        <v-chip v-if=\"book.listPrice.isOnSale\" class=\"ma-4\" color=\"red\" text-color=\"white\">\r\n          <v-avatar left>\r\n            <v-icon>mdi-sale</v-icon>\r\n          </v-avatar>\r\n          <span class=\"font-weight-bold subtitle-1\">On Sale!</span>\r\n        </v-chip>\r\n      </v-img>\r\n      <v-card-title>\r\n        {{ book.title.toUpperCase() }}\r\n        <v-spacer></v-spacer>\r\n        <div v-if=\"checkNan()\">{{ bookAge }}</div>\r\n      </v-card-title>\r\n      <v-card-subtitle v-if=\"book.authors\">\r\n        <span class=\"font-weight-bold\">Authors:</span>\r\n        {{ book.authors.join(\" \") }}\r\n        <div v-if=\"book.categories\">\r\n          <span class=\"font-weight-bold\">Categories:</span>\r\n          {{ book.categories.join(\" \") }}\r\n        </div>\r\n      </v-card-subtitle>\r\n      <v-card-text v-if=\"book.description\">\r\n        <span class=\"font-weight-bold\">Description:</span>\r\n        <long-text :txt=\"book.description\"></long-text>\r\n        <div>\r\n          <span class=\"font-weight-bold\">Language:</span>\r\n          {{ book.language }}\r\n        </div>\r\n      </v-card-text>\r\n\r\n      <v-card-actions>\r\n        <span>{{ readStatus }}</span>\r\n        <v-spacer></v-spacer>\r\n        <span class=\"font-weight-bold\">Price:</span>\r\n        <span\r\n          class=\"font-weight-bold\"\r\n          :class=\"{\r\n            redColor: book.listPrice.amount > 150,\r\n            greenColor: book.listPrice.amount < 20,\r\n          }\"\r\n        >{{ book.listPrice.amount }}</span>\r\n      </v-card-actions>\r\n    </v-card>\r\n    <div class=\"reviews-container\">\r\n      <div class=\"add-review-container d-flex justify-center\">\r\n        <div>\r\n          <v-btn @click=\"showReview = !showReview\">Add-Review</v-btn>\r\n        </div>\r\n        <addReview @addReview=\"addReview\" v-if=\"showReview\"></addReview>\r\n      </div>\r\n      <div v-if=\"reviews\">\r\n        <div\r\n          class=\"review-card d-flex justify-space-between\"\r\n          :key=\"idx\"\r\n          v-for=\"(review, idx) in reviews\"\r\n        >\r\n          <div class=\"d-flex flex-column\">\r\n            <div class=\"name-date d-flex justify-space-between\">\r\n              <div class=\"d-flex\">\r\n                <p class=\"bold\">name:</p>\r\n                <p>{{ review.name }}</p>\r\n              </div>\r\n              <div class=\"d-flex\">\r\n                <p class=\"bold\">date:</p>\r\n                <p>{{ review.date }}</p>\r\n              </div>\r\n            </div>\r\n            <div class=\"d-flex\">\r\n              <p class=\"bold\">review:</p>\r\n              <p>{{ review.txt }}</p>\r\n            </div>\r\n          </div>\r\n          <div class=\"div\">\r\n            <v-btn @click=\"removeReview(review)\">X</v-btn>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <!-- <router-link to=\"/book/{getNextBookId}\"> -->\r\n    <v-btn @click=\"goToNextBook\">Next-Book</v-btn>\r\n    <!-- </router-link> -->\r\n  </div>\r\n</template>\r\n<script>\r\nimport longText from \"../components/longText\";\r\nimport addReview from \"../components/addReview\";\r\nimport bookService from \"../services/bookService.js\";\r\nexport default {\r\n  name: \"bookDetails\",\r\n  data() {\r\n    return {\r\n      book: null,\r\n      showReview: false,\r\n      reviews: [],\r\n      nextBook: false\r\n    };\r\n  },\r\n  components: {\r\n    longText,\r\n    addReview\r\n  },\r\n  methods: {\r\n    addReview(review) {\r\n      this.setNotificationActive();\r\n      const bookId = this.$route.params.id;\r\n      bookService.addReview(bookId, review);\r\n      this.showReview = false;\r\n      this.reviews.push(review);\r\n      console.log(\"added review: \", this.reviews);\r\n    },\r\n    removeReview(review) {\r\n      this.setNotificationActive();\r\n      const bookId = this.$route.params.id;\r\n      bookService.removeReview(bookId, review);\r\n      this.getCurrReviews();\r\n\r\n      // this.reviews.pop();\r\n\r\n      console.log(\"this.reviews: \", this.reviews);\r\n    },\r\n    setNotificationActive() {\r\n      this.$store.dispatch(\"updateSnackBarStatus\", true);\r\n    },\r\n    getCurrReviews() {\r\n      this.book.reviews ? (this.reviews = this.book.reviews) : [];\r\n    },\r\n    checkNan() {\r\n      return isNaN(this.book.publishedDate) ? false : true;\r\n    },\r\n\r\n \r\n    goToNextBook() {\r\n      this.$router.push({\r\n        name: \"bookDetails\",\r\n        params: {\r\n          id: this.$store.getters.getNextBook\r\n        }\r\n      });\r\n    }\r\n  },\r\n  watch: {\r\n    \"$route.params.id\"(newVal, oldVal) {\r\n      console.log(\"newVal\", newVal);\r\n      console.log(\"oldVal\", oldVal);\r\n      let bookId = this.$route.params.id;\r\n      bookService.getById(bookId).then(book => {\r\n        this.book = book;\r\n        this.getCurrReviews();\r\n      });\r\n    }\r\n  },\r\n  computed: {\r\n    readStatus() {\r\n      let pageCount = this.book.pageCount;\r\n      if (pageCount > 500) {\r\n        return \"Long reading\";\r\n      }\r\n      if (pageCount > 200) {\r\n        return \"Decent Reading\";\r\n      }\r\n      if (pageCount < 100) {\r\n        return \"Light Reading\";\r\n      }\r\n      return \"Medium Reading\";\r\n    },\r\n    bookAge() {\r\n      let bookAge = this.book.publishedDate;\r\n      let currYear = new Date().getFullYear();\r\n      let yearsDifference = currYear - bookAge;\r\n      if (yearsDifference > 10) return \"Veteran\";\r\n      if (yearsDifference < 1) return \"New\";\r\n      return yearsDifference + \" years ago\";\r\n    }\r\n  },\r\n  mounted() {},\r\n  async created() {\r\n    let bookId = this.$route.params.id;\r\n    const currBook = await bookService.getById(bookId);\r\n    this.book = currBook;\r\n    this.getCurrReviews();\r\n    this.$store.dispatch(\"updateCurrBook\", this.book);\r\n    console.log(this.$store.getters.getCurrBook)\r\n  }\r\n};\r\n</script>\r\n<style lang=\"scss\">\r\n.bold {\r\n  font-weight: 700;\r\n}\r\n.reviews-container {\r\n  width: 500px;\r\n  .add-review-container {\r\n    width: 100%;\r\n    margin-bottom: 20px;\r\n  }\r\n}\r\n\r\n.review-card {\r\n  margin: 15px 0;\r\n  width: 500px;\r\n  padding: 20px;\r\n  background-color: lightgray;\r\n  .name-date {\r\n    width: 400px;\r\n    border-bottom: 1px solid rgb(255, 255, 255);\r\n    padding-right: 20px;\r\n  }\r\n}\r\n.greenColor {\r\n  color: green;\r\n}\r\n.redColor {\r\n  color: red;\r\n}\r\n</style>\r\n"]}]}